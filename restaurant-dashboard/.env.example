# Environment Configuration

This file explains how to set up environment variables for the dashboard.

## Development Environment

Create a `.env` file in the root directory (if you want to use environment variables):

```env
# API Configuration
REACT_APP_API_URL=http://localhost:5000
REACT_APP_API_TIMEOUT=30000

# Data Source
REACT_APP_DATA_SOURCE=api
# Options: api, csv, mock

# Feature Flags
REACT_APP_ENABLE_EXPORT=true
REACT_APP_ENABLE_FILTERS=true
REACT_APP_ENABLE_ALERTS=false

# Analytics
REACT_APP_ENABLE_ANALYTICS=false
```

## Production Environment

Create a `.env.production` file:

```env
# API Configuration
REACT_APP_API_URL=https://api.yourdomain.com
REACT_APP_API_TIMEOUT=30000

# Data Source
REACT_APP_DATA_SOURCE=api

# Feature Flags
REACT_APP_ENABLE_EXPORT=true
REACT_APP_ENABLE_FILTERS=true
REACT_APP_ENABLE_ALERTS=true

# Analytics
REACT_APP_ENABLE_ANALYTICS=true
```

## Using Environment Variables in Code

### In App.jsx:

```javascript
const API_URL = process.env.REACT_APP_API_URL;
const DATA_SOURCE = process.env.REACT_APP_DATA_SOURCE;

useEffect(() => {
  const loadData = async () => {
    if (DATA_SOURCE === 'api') {
      // Load from API
      const response = await fetch(`${API_URL}/data/orders`);
      const data = await response.json();
      setData(data);
    } else if (DATA_SOURCE === 'csv') {
      // Load from CSV
      // ...
    }
  };
}, []);
```

## Backend Environment Variables

If using Node.js backend, create `.env` in project root:

```env
PORT=5000
NODE_ENV=development
CORS_ORIGIN=http://localhost:3000

# CSV File Paths
CSV_ORDERS_PATH=./enterprise/Kathmandu Restaurant Orders.csv
CSV_CUSTOMERS_PATH=./enterprise/Customer Profiles.csv
CSV_ITEMS_PATH=./enterprise/Order Items Detail.csv
CSV_MENU_PATH=./enterprise/Menu Catalog.csv

# Database (if using database instead of CSV)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=restaurant_db
DB_USER=postgres
DB_PASSWORD=password

# Cache
ENABLE_CACHE=true
CACHE_TTL=3600
```

## Production Build Environment

When building for production:

```bash
# Set environment and build
REACT_APP_API_URL=https://api.yourdomain.com npm run build

# Or use .env.production file created above
npm run build
```

## Docker Configuration

If deploying with Docker, use `.env` in docker-compose:

```yaml
version: '3'
services:
  frontend:
    build: .
    ports:
      - "3000:3000"
    environment:
      REACT_APP_API_URL: http://backend:5000
      REACT_APP_DATA_SOURCE: api

  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      PORT: 5000
      NODE_ENV: production
      CSV_ORDERS_PATH: /data/Kathmandu Restaurant Orders.csv
    volumes:
      - ./enterprise:/data
```

## Deployment Platforms

### Vercel
Environment variables can be set in Vercel dashboard:
1. Go to Settings → Environment Variables
2. Add your variables
3. Redeploy

### Netlify
1. Go to Site settings → Build & deploy
2. Add environment variables
3. Trigger new deploy

### AWS
Use AWS Secrets Manager or Parameter Store for sensitive data.

### Heroku
```bash
heroku config:set REACT_APP_API_URL=https://your-api.herokuapp.com
```

## Security Best Practices

1. **Never commit `.env` files** - Add to `.gitignore`
2. **Use secrets for sensitive data** - API keys, database credentials
3. **Keep production keys separate** - Don't reuse development keys
4. **Rotate credentials regularly** - Change passwords/tokens monthly
5. **Use HTTPS only** - Always in production

## Example: Setting API Dynamically

```javascript
// App.jsx
const getApiUrl = () => {
  if (process.env.NODE_ENV === 'development') {
    return 'http://localhost:5000';
  } else {
    return process.env.REACT_APP_API_URL;
  }
};

const API_URL = getApiUrl();
```

## Configuration for Different Data Sources

### Option 1: CSV Files in Public Folder
```env
REACT_APP_DATA_SOURCE=csv
REACT_APP_CSV_ORDERS=/data/orders.csv
REACT_APP_CSV_CUSTOMERS=/data/customers.csv
REACT_APP_CSV_ITEMS=/data/items.csv
```

### Option 2: REST API
```env
REACT_APP_DATA_SOURCE=api
REACT_APP_API_URL=http://localhost:5000
```

### Option 3: GraphQL API
```env
REACT_APP_DATA_SOURCE=graphql
REACT_APP_GRAPHQL_URL=http://localhost:4000/graphql
```

### Option 4: Mock Data (Development)
```env
REACT_APP_DATA_SOURCE=mock
REACT_APP_USE_MOCK_DATA=true
```

## Testing Different Configurations

### Test with Local API
```bash
# Terminal 1
npm start

# Terminal 2
node server.js
```

### Test with CSV Files
1. Place CSV files in `public/data/`
2. Set `REACT_APP_DATA_SOURCE=csv`
3. Run `npm start`

### Test Production Build Locally
```bash
npm run build
npm install -g serve
serve -s build
```

## Troubleshooting

### Variables not loading
- Ensure variable names start with `REACT_APP_`
- Restart dev server after changing `.env`
- Check `.env` file is in root directory

### API not connecting
- Verify `REACT_APP_API_URL` is correct
- Check CORS configuration on backend
- Ensure backend server is running

### CSV files not found
- Verify file paths are correct
- Check files are in `public/data/` folder
- Ensure file names match exactly (case-sensitive)

---

For more information, see:
- React: https://create-react-app.dev/docs/adding-custom-environment-variables/
- Node.js: https://nodejs.org/en/knowledge/file-system/security/introduction/
